@page "/"
@inject DashboardApiService DashboardApiService
@using StudyTime.Application.DTOs.Dashboard
@using StudyTime.DesktopClient.Services

<PageHeader Title="Hoş geldin 👋"
            Subtitle="Bugünkü üretkenlik özetin ve aktif görevlerin." />

@if (_summary is null)
{
    <p class="muted">Yükleniyor...</p>
}
else
{
    <ProductivityCard Score="@_summary.ProductivityScore"
                      StatusText="Good"
                      TrendText="+12% from last week" />

    <div class="dashboard-grid">
        <StatCard Value="@_summary.ActiveLessons" Label="Aktif Ders" Icon="📚" />
        <StatCard Value="@_summary.PendingTasks" Label="Bekleyen Görev" Icon="⏳" />
        <StatCard Value="@_summary.CompletedTasks" Label="Tamamlanan" Icon="✅" />
        <StatCard Value="@_summary.TodayStudiedMinutes" Label="Bugün Süre (dk)" Icon="⏱" />
    </div>
}

@code {
    private DashboardSummaryDto? _summary;

    protected override async Task OnInitializedAsync()
    {
        _summary = await DashboardApiService.GetSummaryAsync();
    }
}
